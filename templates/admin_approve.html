{% extends "base.html" %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h2><i class="bi bi-check-circle me-2"></i> Duyệt sản phẩm</h2>
        <p class="text-muted">Duyệt các sản phẩm do nhân viên thêm vào hệ thống</p>
    </div>
</div>

{% if pending_products|length == 0 %}
<div class="alert alert-success">
    <i class="bi bi-check-circle me-2"></i>
    Không có sản phẩm nào chờ duyệt!
</div>
{% else %}
<div class="table-container">
    <div class="table-header">
        <h5><i class="bi bi-clock-history me-2"></i> Sản phẩm chờ duyệt ({{ pending_products|length }})</h5>
    </div>

    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Tên sản phẩm</th>
                    <th>Thông tin nhà cung cấp</th>
                    <th>Người thêm</th>
                    <th>Thông tin chi tiết</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
            <tbody>
                {% for product in pending_products %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>
                        <strong>{{ product.name }}</strong><br>
                        <small class="text-muted">SKU: {{ product.sku }}</small><br>
                        <span class="badge bg-info">{{ product.category }}</span>
                    </td>
                    <td>
                        <strong>Nhà cung cấp:</strong> {{ product.supplier }}<br>
                        <strong>Quốc gia:</strong> {{ product.supplier_country }}<br>
                        <strong>Nhà SX:</strong> {{ product.manufacturer }}<br>
                        <strong>Phân phối:</strong> {{ product.distributor }}
                    </td>
                    <td>{{ product.added_by_name }}</td>
                    <td>
                        <strong>Số lượng:</strong> {{ product.stock }}<br>
                        <strong>Giá:</strong> {{ "{:,.0f}".format(product.price) }} đ<br>
                        <strong>Vị trí:</strong> {{ product.location }}<br>
                        <small>{{ product.description[:50] }}...</small>
                    </td>
                    <td>
                        <div class="btn-group">
                            <form method="post" action="/admin/products/{{ product.id }}/approve" class="d-inline">
                                <button type="submit" class="btn btn-sm btn-success">
                                    <i class="bi bi-check"></i> Duyệt
                                </button>
                            </form>
                            <form method="post" action="/admin/products/{{ product.id }}/reject" class="d-inline ms-1">
                                <button type="submit" class="btn btn-sm btn-danger">
                                    <i class="bi bi-x"></i> Từ chối
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}
{% endblock %}